<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Mini ctOS - Painel de Controle</title>
  <link rel="stylesheet" href="style.css">
  <!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
  
</script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AQUI_TUA_API_KEY&callback=inicializarMapa" async defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- jsPDF para exportar PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <h1>Mini ctOS - Painel Central</h1>

  <div class="panel">
    <div class="section">
      <h2>SemÃ¡foro</h2>
      <button onclick="toggleTraffic()">Alternar Luz</button>
      <p id="trafficStatus">SemÃ¡foro: ğŸš¦ Vermelho</p>
    </div>

    <div class="section">
      <h2>CÃ¢meras</h2>
      <button onclick="toggleCamera()">Ligar/Desligar CÃ¢meras</button>
      <p id="cameraStatus">CÃ¢meras: ğŸ”´ Desligadas</p>
    </div>

    <div class="section">
      <h2>Rede ElÃ©trica</h2>
      <button onclick="togglePower()">Alternar Energia</button>
      <p id="powerStatus">Energia: âš¡ Ativa</p>
    </div>

    <div class="section">
      <h2>Dados do CidadÃ£o</h2>
      <button onclick="carregarCidadaos()">Carregar Dados</button>
      <pre id="citizenData">Nenhum cidadÃ£o carregado.</pre>
    </div>
    
    <div class="section">
      <h2>Alertas de AmeaÃ§a</h2>
      <div id="alertas" style="color: red; font-weight: bold;">Sem alertas no momento.</div>
    </div>
    <div class="section">
      <h2>Mapa Interativo</h2>
      <div id="map" style="height: 400px; width: 100%; border: 2px solid #00ffcc;"></div>
    </div>
  </div>
  <div class="section">
    <h2>EstatÃ­sticas de VigilÃ¢ncia</h2>
  
    <canvas id="graficoVigilancia" width="300" height="300"></canvas>
    <br>
    <canvas id="graficoZonaPerigo" width="300" height="300"></canvas>
  
    <!-- BotÃµes para exportar -->
    <div style="margin-top: 15px;">
      <button onclick="exportarImagem()">ğŸ“¸ Salvar grÃ¡fico como imagem</button>
      <button onclick="exportarPDF()">ğŸ“ Exportar como PDF</button>
    </div>
  
  
    <canvas id="graficoVigilancia" width="300" height="300"></canvas>
    <br>
    <canvas id="graficoZonaPerigo" width="300" height="300"></canvas>
  </div>
  <div id="infoCidadao" class="section">
    <h3>Detalhes do cidadÃ£o</h3>
    <p id="detalhes"></p>
  </div>
  <div class="section">
    <h2>ğŸš¨ Painel de Alertas</h2>
    <ul id="painelAlertas"></ul>
  </div>

  <script src="script.js"></script>
  <audio id="somAlerta" src="beep-01a.mp3" preload="auto"></audio>
  <div class="section" style="margin-bottom: 20px;">
    <h3>ğŸ” Filtros de CidadÃ£os</h3>
  
    <input type="text" id="filtroNome" placeholder="Buscar por nome..." oninput="aplicarFiltros()">
  
    <select id="filtroVigilancia" onchange="aplicarFiltros()">
      <option value="">Todos os nÃ­veis</option>
      <option value="Alta">Alta</option>
      <option value="Moderada">Moderada</option>
      <option value="Baixa">Baixa</option>
    </select>
  
    <label>
      <input type="checkbox" id="filtroZona" onchange="aplicarFiltros()"> Apenas em zona de perigo
    </label>
  </div>
  <div id="sistema" style="display: none;">
    <!-- aqui dentro vai o mapa, grÃ¡ficos, filtros, etc -->
  </div>
  <div style="margin-top: 10px;">
    <button onclick="exportarLogsTXT()">ğŸ“„ Exportar Logs (.txt)</button>
    <button onclick="exportarLogsJSON()">ğŸ—‚ Exportar Logs (.json)</button>
  </div>
  <div id="menuTopo" style="position: fixed; top: 0; right: 0; background: #222; color: white; padding: 10px; z-index: 1000;">
  <span>ğŸ“¡ Mini ctOS</span>
  <button onclick="window.location.href='gerenciar.html'" style="background:#444; color:white; border:none; padding:6px 12px; margin-left:5px;">ğŸ› ï¸ AdministraÃ§Ã£o</button>
  <button onclick="logout()" style="background:#444; color:white; border:none; padding:6px 12px; margin-left:5px;">ğŸšª Sair</button>
</div>

</body>
</html>